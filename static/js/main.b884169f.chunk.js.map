{"version":3,"sources":["contexts/CurrentUserContext.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/AddPlacePopup.js","components/EditAvatarPopup.js","components/Header.js","components/Card.js","components/Main.js","components/Footer.js","components/ImagePopup.js","utils/Api.js","components/App.js","index.js","images/logo.svg"],"names":["CurrentUserContext","React","createContext","PopupWithForm","title","name","btnValue","children","isOpen","onClose","onSubmit","className","action","method","noValidate","type","value","onClick","EditProfilePopup","onUpdateUser","useState","setName","description","setDescription","currentUser","useContext","useEffect","about","e","preventDefault","defaultValue","onChange","target","placeholder","minLength","maxLength","required","id","AddPlacePopup","onAddPlace","nameRef","useRef","linkRef","link","current","ref","EditAvatarPopup","onUpdateAvatar","urlRef","console","log","avatar","Header","src","logo","alt","Card","onCardDelete","onCardLike","onCardClick","card","likes","cardDeleteButtonClassName","owner","_id","isLiked","some","i","cardLikeButtonClassName","Main","onEditProfile","onEditAvatar","cards","map","key","length","Footer","ImagePopup","api","config","this","_url","url","_headers","headers","fetch","then","res","ok","json","Promise","reject","status","body","JSON","stringify","authorization","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","selectedCard","setSelectedCard","setCurrentUser","setCards","closeAllPopup","getAllCardsList","item","cardEl","catch","err","getUserData","Provider","changeLikeCard","newCard","newCards","cardItem","deleteCard","newCardArr","filter","userData","changeUserData","addCard","changeUserAvatar","ReactDOM","render","StrictMode","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.b884169f.chunk.js","sourcesContent":["import React from 'react';\r\nexport const CurrentUserContext = React.createContext();","import React from \"react\";\n\nexport default function PopupWithForm({ title, name, btnValue, children, isOpen, onClose, onSubmit }) {\n  return (\n    <div className={`popup popup_type_${name} ${isOpen && \"popup_opened\"}`}>\n      <form\n        onSubmit={onSubmit}\n        name={name}\n        action=\"#\"\n        method=\"POST\"\n        className={`popup__form popup__form_type_${name}`}\n        noValidate\n      >\n        <h2 className=\"popup__title\">{title}</h2>\n\n        {children}\n\n        <button type=\"submit\" value=\"\" className=\"popup__button\">\n          {btnValue}\n        </button>\n        <button type=\"reset\" className=\"popup__button-close\" onClick={onClose}></button>\n      </form>\n    </div>\n  );\n}\n","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nexport default function EditProfilePopup({ isOpen, onClose, onUpdateUser }) {\r\n  const [name, setName] = React.useState(\"\");\r\n  const [description, setDescription] = React.useState(\"\");\r\n\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  React.useEffect(() => {\r\n    setName(currentUser.name);\r\n    setDescription(currentUser.about);\r\n  }, [currentUser]);\r\n\r\n  function handleChangeName(e) {\r\n    setName(e.target.value);\r\n  }\r\n\r\n  function handleChangeDescription(e) {\r\n    setDescription(e.target.value);\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    // Запрещаем браузеру переходить по адресу формы\r\n    e.preventDefault();\r\n\r\n    // Передаём значения управляемых компонентов во внешний обработчик\r\n    onUpdateUser({\r\n      name,\r\n      about: description,\r\n    });\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      onSubmit={handleSubmit}\r\n      title={\"Редактировать профиль\"}\r\n      name={\"edit\"}\r\n      btnValue={\"Сохранить\"}\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n    >\r\n      <label className=\"popup__label\">\r\n        <input\r\n          defaultValue={name}\r\n          onChange={handleChangeName}\r\n          placeholder=\"Имя\"\r\n          type=\"text\"\r\n          name=\"name\"\r\n          className=\"popup__input popup__input_name\"\r\n          minLength=\"2\"\r\n          maxLength=\"40\"\r\n          required\r\n        />\r\n        <span className=\"popup__error\" id=\"name-error\"></span>\r\n      </label>\r\n\r\n      <label className=\"popup__label\">\r\n        <input\r\n          defaultValue={description}\r\n          onChange={handleChangeDescription}\r\n          placeholder=\"Занятие\"\r\n          type=\"text\"\r\n          name=\"about\"\r\n          minLength=\"2\"\r\n          maxLength=\"200\"\r\n          className=\"popup__input popup__input_profession\"\r\n          required\r\n        />\r\n        <span className=\"popup__error\" id=\"about-error\"></span>\r\n      </label>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nexport default function AddPlacePopup({ isOpen, onClose, onAddPlace }) {\r\n  const nameRef = React.useRef();\r\n  const linkRef = React.useRef();\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onAddPlace({\r\n      link: linkRef.current.value,\r\n      name: nameRef.current.value,\r\n    });\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      onSubmit={handleSubmit}\r\n      title={\"Новое место\"}\r\n      name={\"add\"}\r\n      btnValue={\"Создать\"}\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n    >\r\n      <label className=\"popup__label\">\r\n        <input\r\n          ref={nameRef}\r\n          type=\"text\"\r\n          name=\"name\"\r\n          minLength=\"1\"\r\n          maxLength=\"30\"\r\n          className=\"popup__input popup__input_title\"\r\n          placeholder=\"Название\"\r\n          required\r\n        />\r\n        <span className=\"popup__error\" id=\"name-error\"></span>\r\n      </label>\r\n\r\n      <label className=\"popup__label\">\r\n        <input\r\n          ref={linkRef}\r\n          type=\"url\"\r\n          name=\"link\"\r\n          className=\"popup__input popup__input_link\"\r\n          placeholder=\"Ссылка на картинку\"\r\n          required\r\n        />\r\n        <span className=\"popup__error\" id=\"link-error\"></span>\r\n      </label>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nexport default function EditAvatarPopup({ isOpen, onClose, onUpdateAvatar }) {\r\n  const urlRef = React.useRef();\r\n  console.log(urlRef.current);\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    onUpdateAvatar({\r\n      avatar: urlRef.current.value\r\n    });\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      onSubmit={handleSubmit}\r\n      name={\"avatar\"}\r\n      title={\"Обновить аватар\"}\r\n      btnValue={\"Сохранить\"}\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n    >\r\n      <label className=\"popup__label\">\r\n        <input\r\n          ref={urlRef}\r\n          type=\"url\"\r\n          name=\"avatar\"\r\n          className=\"popup__input popup__input_link\"\r\n          placeholder=\"Ссылка на аватар\"\r\n          required\r\n        />\r\n        <span className=\"popup__error\" id=\"avatar-error\"></span>\r\n      </label>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport logo from \"../images/logo.svg\";\r\n\r\nexport default function Header() {\r\n  return (\r\n    <header className=\"header\">\r\n      <img src={logo} alt=\"Логотип Mesto\" className=\"header__logo\" />\r\n    </header>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\n\r\nexport default function Card({ onCardDelete, onCardLike, onCardClick, card, link, name, likes }) {\r\n  function handleCard() {\r\n    onCardClick(card);\r\n    console.log(card);\r\n  }\r\n\r\n  function handleLikeClick() {\r\n    onCardLike(card)\r\n  }\r\n\r\n  function handleDeleteClick() {\r\n    onCardDelete(card)\r\n  }\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  const isOwn = card.owner._id === currentUser._id;\r\n  const cardDeleteButtonClassName = isOwn ? 'card__delete' : 'card__delete_hidden';\r\n  const isLiked = card.likes.some(i => i._id === currentUser._id);\r\n  console.log(isLiked)\r\n  const cardLikeButtonClassName = isLiked ? 'card__button-like_active' : 'card__button-like'; \r\n  \r\n  return (\r\n    <li className=\"cards__list-item\">\r\n      <img onClick={handleCard} src={link} alt=\"\" className=\"card__image\" />\r\n      <h2 className=\"card__caption\">{name}</h2>\r\n      <div className=\"card__like-container\">\r\n        <button onClick={handleLikeClick} type=\"button\" className={cardLikeButtonClassName}></button>\r\n        <span className=\"like__counter\">{likes}</span>\r\n      </div>\r\n\r\n      <button onClick={handleDeleteClick} type=\"button\" className={cardDeleteButtonClassName}></button>\r\n    </li>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\nimport Card from \"../components/Card\";\r\n\r\nexport default function Main({\r\n  onCardClick,\r\n  onEditProfile,\r\n  onAddPlace,\r\n  onEditAvatar,\r\n  cards,\r\n  onCardLike,\r\n  onCardDelete,\r\n}) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  return (\r\n    <main className=\"content\">\r\n      <section className=\"profile\">\r\n        <div className=\"profile__overlay\" onClick={onEditAvatar}>\r\n          <img src={currentUser.avatar} alt=\"Аватар\" className=\"profile__avatar\" />\r\n        </div>\r\n        <div className=\"profile__info\">\r\n          <h1 className=\"profile__title\">{currentUser.name}</h1>\r\n          <button\r\n            onClick={onEditProfile}\r\n            type=\"button\"\r\n            className=\"profile__button profile__button_edit\"\r\n          ></button>\r\n          <p className=\"profile__subtitle\">{currentUser.about}</p>\r\n        </div>\r\n\r\n        <button\r\n          onClick={onAddPlace}\r\n          type=\"button\"\r\n          className=\"profile__button profile__button_add\"\r\n        ></button>\r\n      </section>\r\n\r\n      <section className=\"cards\">\r\n        <ul className=\"cards__list\">\r\n          {cards.map((card) => (\r\n            <Card\r\n              onCardDelete={onCardDelete}\r\n              onCardLike={onCardLike}\r\n              onCardClick={onCardClick}\r\n              card={card}\r\n              key={card._id}\r\n              _id={card._id}\r\n              name={card.name}\r\n              link={card.link}\r\n              likes={card.likes.length}\r\n            />\r\n          ))}\r\n        </ul>\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nexport default function Footer() {\r\n  return (\r\n    <footer className=\"footer\">\r\n      <p className=\"footer__copyright\">&copy; Mesto Russia</p>\r\n    </footer>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nexport default function ImagePopup({ card, onClose }) {\r\n  console.log(card.link, card.name);\r\n  return (\r\n    <div className={`popup popup_type_open-image ${card.link && \"popup_opened\"}`}>\r\n      <div className=\"popup__container\">\r\n        <figure className=\"popup__card-contain\">\r\n          <img src={card.link} alt=\"\" className=\"popup__image\" />\r\n          <figcaption className=\"popup__caption\">{card.name}</figcaption>\r\n        </figure>\r\n\r\n        <button type=\"button\" className=\"popup__button-close\" onClick={onClose}></button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","export class Api {\r\n  constructor(config) {\r\n    this._url = config.url;\r\n    this._headers = config.headers;\r\n  }\r\n\r\n  getAllCardsList() {\r\n    return fetch(this._url, {\r\n      method: \"GET\",\r\n      headers: this._headers,\r\n    }).then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    });\r\n  }\r\n\r\n  addCard({link, name}) {\r\n    return fetch(this._url, {\r\n      method: \"POST\",\r\n      headers: this._headers,\r\n      body: JSON.stringify({ link: link, name: name }),\r\n    }).then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    });\r\n  }\r\n\r\n  getUserData() {\r\n    return fetch('https://mesto.nomoreparties.co/v1/cohort-15/users/me', {\r\n      method: \"GET\",\r\n      headers: this._headers,\r\n    }).then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    });\r\n  }\r\n\r\n  changeUserData({name, about}) {\r\n    return fetch('https://mesto.nomoreparties.co/v1/cohort-15/users/me', {\r\n      method: \"PATCH\",\r\n      headers: this._headers,\r\n      body: JSON.stringify({name: name, about: about}),\r\n    }).then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    });\r\n  }\r\n\r\n  changeUserAvatar({avatar}) {\r\n    return fetch('https://mesto.nomoreparties.co/v1/cohort-15/users/me/avatar', {\r\n      method: \"PATCH\",\r\n      headers: this._headers,\r\n      body: JSON.stringify({avatar: avatar}),\r\n    }).then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    });\r\n  }\r\n\r\n  deleteCard(id) {\r\n    return fetch(`https://mesto.nomoreparties.co/v1/cohort-15/cards/${id}`, {\r\n      method: \"DELETE\",\r\n      headers: this._headers,\r\n    }).then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    });\r\n  }\r\n\r\n  changeLikeCard(id, isLiked) {\r\n    if(isLiked) {\r\n      return fetch(`https://mesto.nomoreparties.co/v1/cohort-15/cards/likes/${id}`, {\r\n      method: \"PUT\",\r\n      headers: this._headers,\r\n    }).then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    });\r\n    } else {\r\n      return fetch(`https://mesto.nomoreparties.co/v1/cohort-15/cards/likes/${id}`, {\r\n      method: \"DELETE\",\r\n      headers: this._headers,\r\n    }).then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    });\r\n  }\r\n}\r\n  \r\n\r\n  /*addLikeCard(id) {\r\n    return fetch(`https://mesto.nomoreparties.co/v1/cohort-15/cards/likes/${id}`, {\r\n      method: \"PUT\",\r\n      headers: this._headers,\r\n    }).then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    });\r\n  }\r\n\r\n  deleteLikeCard(id) {\r\n    return fetch(`https://mesto.nomoreparties.co/v1/cohort-15/cards/likes/${id}`, {\r\n      method: \"DELETE\",\r\n      headers: this._headers,\r\n    }).then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    });\r\n  }*/\r\n}\r\n\r\nconst api = new Api({\r\n  // Экземпляр класса АПИ\r\n  url: \"https://mesto.nomoreparties.co/v1/cohort-15/cards\",\r\n  headers: {\r\n    authorization: \"a0bff86e-f64d-4da1-b51a-ea82a126a932\",\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n});\r\n\r\nexport default api;\r\n","import React from \"react\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport Header from \"./Header\";\nimport Main from \"./Main\";\nimport Footer from \"./Footer\";\nimport PopupWithForm from \"./PopupWithForm\";\nimport ImagePopup from \"./ImagePopup\";\nimport api from \"../utils/Api.js\";\n\nfunction App() {\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState({});\n  const [currentUser, setCurrentUser] = React.useState({});\n\n  const [cards, setCards] = React.useState([]);\n  React.useEffect(() => {\n    api\n      .getAllCardsList()\n      .then((res) => {\n        const item = res.map((cardEl) => ({\n          link: cardEl.link,\n          name: cardEl.name,\n          likes: cardEl.likes,\n          _id: cardEl._id,\n          owner: cardEl.owner,\n        }));\n\n        setCards(item);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }, []);\n\n  function handleCardLike(card) {\n    // Снова проверяем, есть ли уже лайк на этой карточке\n    const isLiked = card.likes.some((i) => i._id === currentUser._id);\n\n    // Отправляем запрос в API и получаем обновлённые данные карточки\n    api.changeLikeCard(card._id, !isLiked).then((newCard) => {\n      // Формируем новый массив на основе имеющегося, подставляя в него новую карточку\n      const newCards = cards.map((cardItem) => (cardItem._id === card._id ? newCard : cardItem));\n      // Обновляем стейт\n      setCards(newCards);\n    });\n  }\n\n  function handleCardDelete(card) {\n    api.deleteCard(card._id).then((res) => {\n      const newCardArr = cards.filter((cardEl) => cardEl._id !== card._id);\n      console.log(res);\n      setCards(newCardArr);\n    });\n  }\n\n  React.useEffect(() => {\n    api.getUserData().then((res) => {\n      setCurrentUser(res);\n    });\n  }, []);\n\n  function handleAddPlaceSubmit(newCard) {\n    api.addCard(newCard).then((newCard) => {\n      setCards([...cards, newCard]);\n      setIsAddPlacePopupOpen(false);\n    });\n  }\n\n  function handleUpdateUser(userData) {\n    api.changeUserData(userData).then((userData) => {\n      setCurrentUser(userData);\n      setIsEditProfilePopupOpen(false);\n    });\n  }\n\n  function handleUpdateAvatar(userData) {\n    api.changeUserAvatar(userData).then((userData) => {\n      setCurrentUser(userData);\n      setIsEditAvatarPopupOpen(false);\n    });\n  }\n\n  function handleCardClick(card) {\n    setSelectedCard(card);\n  }\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  function closeAllPopup() {\n    setSelectedCard(false);\n    setIsEditProfilePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"page\">\n        <Header />\n        <Main\n          onCardClick={handleCardClick}\n          onEditAvatar={handleEditAvatarClick}\n          onEditProfile={handleEditProfileClick}\n          onAddPlace={handleAddPlaceClick}\n          cards={cards}\n          onCardLike={handleCardLike}\n          onCardDelete={handleCardDelete}\n        />\n        <Footer />\n\n        <EditProfilePopup\n          isOpen={isEditProfilePopupOpen}\n          onClose={closeAllPopup}\n          onUpdateUser={handleUpdateUser}\n        />\n\n        <AddPlacePopup\n          isOpen={isAddPlacePopupOpen}\n          onClose={closeAllPopup}\n          onAddPlace={handleAddPlaceSubmit}\n        />\n\n        <EditAvatarPopup\n          isOpen={isEditAvatarPopupOpen}\n          onClose={closeAllPopup}\n          onUpdateAvatar={handleUpdateAvatar}\n        />\n\n        <PopupWithForm\n          name={\"confirm\"}\n          title={\"Вы уверены?\"}\n          btnValue={\"Да\"}\n          onClose={closeAllPopup}\n        ></PopupWithForm>\n\n        <ImagePopup card={selectedCard} onClose={closeAllPopup} />\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n","module.exports = __webpack_public_path__ + \"static/media/logo.c6f11019.svg\";"],"sourceRoot":""}